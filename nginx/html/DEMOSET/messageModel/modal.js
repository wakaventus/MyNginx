var emitter={on:function(event,fn){var handles=this._handles||(this._handles={}),calls=handles[event]||(handles[event]=[]);calls.push(fn);return this},off:function(event,fn){if(!event||!this._handles)this._handles={};if(!this._handles)return;var handles=this._handles,calls;if(calls=handles[event]){if(!fn){handles[event]=[];return this}for(var i=0,len=calls.length;i<len;i++){if(fn===calls[i]){calls.splice(i,1);return this}}}return this},emit:function(event){var args=[].slice.call(arguments,1),handles=this._handles,calls;if(!handles||!(calls=handles[event]))return this;for(var i=0,len=calls.length;i<len;i++){calls[i].apply(this,args)}return this}};!function(){function html2node(str){var container=document.createElement("div");container.innerHTML=str;return container.children[0]}function extend(o1,o2){for(var i in o2)if(typeof o1[i]==="undefined"){o1[i]=o2[i]}return o1}var template='<div class="m-modal">    <div class="modal_align"></div>    <div class="modal_wrap animated">      <div class="modal_head">Head</div>      <div class="modal_body">Content</div>      <div class="modal_foot">        <a class="confirm" href="#">Confirm</a>        <a class="cancel" href="#">Cancel</a>      </div>    </div>  </div>';function Modal(options){options=options||{};this.container=this._layout.cloneNode(true);this.body=this.container.querySelector(".modal_body");this.wrap=this.container.querySelector(".modal_wrap");extend(this,options);this._initEvent()}extend(Modal.prototype,{_layout:html2node(template),setContent:function(content){if(!content)return;if(content.nodeType===1){this.body.innerHTML=0;this.body.appendChild(content)}else{this.body.innerHTML=content}},show:function(content){if(content)this.setContent(content);document.body.appendChild(this.container);animateClass(this.wrap,this.animation.enter)},hide:function(){var container=this.container;animateClass(this.wrap,this.animation.leave,function(){document.body.removeChild(container)})},_initEvent:function(){this.container.querySelector(".confirm").addEventListener("click",this._onConfirm.bind(this));this.container.querySelector(".cancel").addEventListener("click",this._onCancel.bind(this))},_onConfirm:function(){this.emit("confirm");this.hide()},_onCancel:function(){this.emit("cancel");this.hide()}});extend(Modal.prototype,emitter);if(typeof exports==="object"){module.exports=Modal}else if(typeof define==="function"&&define.amd){define(function(){return Modal})}else{window.Modal=Modal}}();